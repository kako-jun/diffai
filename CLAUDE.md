# diffai の思想（Philosophy）
「AI/MLデータの差分を、誰でも、どこでも、簡単に」

diffaiは、AI・機械学習分野でのデータ差分抽出に特化したツールです。
従来の diff はテキストベースで、構造を理解できない。
diffai は JSON/YAML/TOMLなどの構造化データに特化し、AI/MLのデータセット、設定ファイル、モデルパラメータの変更を明確に可視化する。

## 名前「diffai」に込めた意味
diff + ai の「ai」は：

- **AI/ML focused** AI・機械学習に特化
- **intelligent** 賢い差分抽出
- **automated** 自動化された分析
- **accessible** 誰でもアクセス可能
- **advanced** 高度な機能

## diffaiとdiffxの関係
diffaiは、diffxプロジェクトの兄弟プロジェクトです。
diffxは汎用的な構造化データ差分ツールであり、diffaiはAI/ML分野に特化したバージョンです。

### 分離の理由
- **対象分野の特化**: diffxは汎用、diffaiはAI/ML特化
- **機能の最適化**: AI/MLデータに特化した機能追加
- **開発の独立性**: それぞれの分野に最適化した開発

## 技術仕様
diffxの技術基盤をそのまま継承し、以下の追加機能を予定：

- **モデルパラメータ差分**: 深層学習モデルの重み変更追跡
- **データセット差分**: 訓練データの変更検出
- **実験設定差分**: ハイパーパラメータの変更追跡
- **評価指標差分**: モデル性能の変化可視化

## 対応フォーマット
- JSON（設定ファイル、APIレスポンス）
- YAML（MLOps設定、Kubernetes設定）
- TOML（プロジェクト設定）
- XML（レガシーシステム連携）
- INI（設定ファイル）
- CSV（データセット、実験結果）

## 将来的な展望
- **MLOps統合**: CI/CDパイプラインでの自動検証
- **実験追跡**: MLflow、Weights & Biasesとの連携
- **モデルバージョニング**: Git LFS、DVC統合
- **可視化**: Jupyter Notebook、Tensorboard連携

---

# TODO: AI/ML特化機能の実装計画

## 🎯 フェーズ1: モデルファイル比較 (優先度: 高)

### 対象ファイル形式
- **PyTorch**: `.pth`, `.pt` ファイル
- **TensorFlow**: `.pb`, `.h5`, `.keras` ファイル  
- **ONNX**: `.onnx` ファイル
- **Safetensors**: `.safetensors` ファイル
- **Pickle**: `.pkl` ファイル（scikit-learn等）

### 実装すべき機能
1. **テンソル形状比較**: モデル層の構造変更検出
2. **重み統計比較**: 平均値、標準偏差、分布の差分
3. **アーキテクチャ差分**: レイヤー追加・削除・変更の検出
4. **メモリ使用量比較**: モデルサイズの変化追跡

### ニーズ・使用場面
- **モデル最適化**: 量子化・プルーニング前後の比較
- **ファインチューニング**: 事前学習モデルからの変化量測定
- **A/Bテスト**: 異なるアーキテクチャの性能比較
- **デバッグ**: 意図しない重み変更の検出

## 🎯 フェーズ2: 実験結果比較 (優先度: 高)

### 対象データ
- **メトリクス**: accuracy, loss, F1-score, AUC等
- **ハイパーパラメータ**: learning_rate, batch_size, epochs等  
- **学習履歴**: training_loss, validation_loss の時系列
- **実験メタデータ**: 実行時間、使用GPU、データセット版数

### 実装すべき機能
1. **統計的有意差判定**: メトリクス改善の信頼性評価
2. **学習曲線比較**: 収束性・過学習の可視化
3. **ハイパーパラメータ影響度**: 性能への寄与度分析
4. **実験再現性チェック**: 同条件での結果一致性確認

### ニーズ・使用場面
- **論文執筆**: 実験結果の客観的比較
- **プロダクション判定**: 新モデルのデプロイ可否決定
- **チューニング効率化**: 有効なハイパーパラメータ特定
- **異常検知**: 想定外の性能劣化の早期発見

## 🎯 フェーズ3: データセット比較 (優先度: 中)

### 対象データ形式
- **NumPy**: `.npy`, `.npz` 配列ファイル
- **Pandas**: `.parquet`, `.feather` データフレーム
- **HuggingFace**: datasets ライブラリ形式
- **画像データ**: メタデータ・統計量比較
- **テキストデータ**: トークン分布・語彙変化

### 実装すべき機能
1. **データドリフト検出**: 分布変化の統計的測定
2. **欠損値パターン**: 欠損データの変化追跡
3. **スキーマ変更**: カラム追加・削除・型変更
4. **サンプルサイズ影響**: データ量変化の性能への影響

### ニーズ・使用場面
- **データ品質管理**: 継続的なデータ品質監視
- **モデル再学習判定**: データ変化によるモデル更新要否
- **特徴量エンジニアリング**: 特徴量変更の効果測定
- **データバージョン管理**: データセット変更履歴の追跡

## 🎯 フェーズ4: MLOps統合 (優先度: 中)

### 統合対象
- **MLflow**: 実験管理プラットフォーム
- **Weights & Biases**: 実験追跡・可視化
- **Kubeflow**: Kubernetes上のML Pipeline
- **DVC**: データバージョン管理
- **Git LFS**: 大容量ファイル管理

### 実装すべき機能
1. **CI/CD統合**: 自動テスト・デプロイでの差分チェック
2. **アラート機能**: 閾値超過時の自動通知
3. **レポート生成**: 差分結果の自動レポート作成
4. **API連携**: 他ツールからのプログラマティック呼び出し

### ニーズ・使用場面
- **自動品質保証**: デプロイ前の自動検証
- **チーム協業**: 変更内容の共有・レビュー
- **監査対応**: 変更履歴の透明性確保
- **運用効率化**: 手動チェック作業の自動化

## 🚀 実装戦略

### 段階的アプローチ
1. **Phase 1**: PyTorchファイル対応（最もニーズが高い）
2. **Phase 2**: 実験結果JSON/YAML対応（既存技術で実装可能）
3. **Phase 3**: TensorFlow・ONNX対応（ライブラリ依存が複雑）
4. **Phase 4**: データセット対応（統計ライブラリ追加）

### 技術的課題
- **ライブラリ依存**: PyTorch/TensorFlow等の重い依存関係
- **メモリ効率**: 大容量モデルファイルの処理最適化
- **精度問題**: 浮動小数点数の差分判定基準
- **バイナリ対応**: テキストベースでないファイル形式

### 競合分析
- **既存ツール不足**: AI/ML特化の差分ツールは少ない
- **ニッチ市場**: 特定分野への特化で差別化可能
- **オープンソース優位**: 研究・教育分野での採用促進
- **企業ニーズ**: MLOpsの成熟に伴う需要増加